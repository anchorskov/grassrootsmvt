<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Connecting…</title>
    <style>
      html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system,
        Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
      .wrap { height: 100%; display: grid; place-items: center; color: #111827; }
      .card { text-align: center; padding: 2rem 2.5rem; border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,.08), 0 1px 2px rgba(0,0,0,.06); }
      .spinner { width: 36px; height: 36px; border-radius: 50%;
        border: 3px solid #e5e7eb; border-top-color: #111827; animation: spin 1s linear infinite; margin: 0 auto 12px; }
      @keyframes spin { to { transform: rotate(360deg); } }
      .muted { color: #6b7280; font-size: .925rem; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="spinner" aria-hidden="true"></div>
        <h1>Connecting to API…</h1>
        <p class="muted">We’re securely verifying your session.</p>
        <noscript>
          <p class="muted">JavaScript is required to continue.</p>
        </noscript>
      </div>
    </div>

    <script>
      (function () {
        var API_BASE = "https://api.grassrootsmvt.org";
        var to = new URLSearchParams(location.search).get("to")
              || "https://volunteers.grassrootsmvt.org/";
        var finish = API_BASE + "/auth/finish?to=" + encodeURIComponent(to);
        var login  = API_BASE + "/cdn-cgi/access/login?redirect_url=" + encodeURIComponent(finish);
        location.replace(login);
      })();
    </script>
  </body>
</html>
